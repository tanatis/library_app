{% extends 'base.html' %}
{% block page_content %}

    <div class="search-wrapper">
        <form class="searchbar" method="get" action="{% url 'index' %}">
            <div class="search-by">
                {{ search_form.search_by }}
            </div>
            <div class="search-form">
                {{ search_form.query }}
                {% csrf_token %}
                <button class="search-btn">search</button>
                <button class="search-btn">search</button>
            </div>
        </form>
    </div>

    <div class="books-list-wrapper">
        {% if books %}
            <div class="lib-sorting">
                Sort by:
                <a href="?sort_by=id">last added</a> |
                <a href="?sort_by=title">title</a> |
                <a href="?sort_by=author">author</a>
            </div>
        {% endif %}
        <div class="books-list">
            {% for book in page_obj %}
                <figure class="book-card">
                    <a href="{% url 'details books' pk=book.pk %}">
                        <img src="/media/{{ book.cover }}" alt="{{ book.title }}">
                        <figcaption>
                            <h3>{{ book.title }}</h3>
                            <p>{{ book.author }}</p>
                        </figcaption>
                    </a>
                </figure>
            {% endfor %}
        </div>

        <div class="books-pagination">
            <ul>
                {% if page_obj.has_previous %}
                    <a href="?page=1"><li><<</li></a>
                    <a href="?page={{ page_obj.previous_page_number }}"><li><</li></a>
                {% endif %}
                {#        Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.#}

                {% for p in page_obj.paginator %}
                    <a href="?page={{ p.number }}"><li>{{ p.number }}</li></a>
                {% endfor %}

                {% if page_obj.has_next %}
                    <a href="?page={{ page_obj.next_page_number }}"><li>></li></a>
                    <a href="?page={{ page_obj.paginator.num_pages }}"><li>>></li></a>
                {% endif %}
            </ul>
        </div>

    </div>
{% endblock %}